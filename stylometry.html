<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-172408096-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-172408096-1');
    </script>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <link rel="stylesheet" href='css/main.css'>
    <link rel="stylesheet" href='css/article.css'>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Balthazar' rel='stylesheet'>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">    <title>ProjectSpace</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <link rel="shortcut icon" type="image/x-icon" href="assets/favicon.ico"/>
    <title>ProjectSpace</title>
  </head>
  <body>
    <nav class="navbar fixed-top navbar-expand-md navbar-dark bg-dark" id="main-navbar">
      <a class="navbar-brand absolute d-none d-md-block" href="javascript:undefined">ProjectSpace</a>
      <div class="absolute center-absolute">
        <a class="navbar-brand d-block d-md-none center" id="navbar-center-brand" href="javascript:undefined">ProjectSpace</a>
      </div>      
      <div class="navbar-collapse collapse" id="navbar">
        <div class="navbar-container">
            <ul class="navbar-nav">
              <li class="nav-item d-block d-md-none">
                <p class="logo-text">ProjectSpace</p>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="about.html">About</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="contact.html">Contact</a>
              </li>
              <li class="nav-item d-block d-md-none">
                <a class="nav-link" href="https://www.linkedin.com/in/marcel-alan-yuwono-6766211a1/" target="_blank">Connect on LinkedIn</a>
              </li>
          </ul>
          </div>
      </div>
      <div class="toggler ml-auto">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" onclick="toggle()">
          <span class="navbar-toggler-icon"></span>
        </button> 
      </div>
      <ul class="navbar-nav absolute right-absolute d-none d-md-block">
          <li class="nav-item btn-small">
            <a href="https://www.linkedin.com/in/marcel-alan-yuwono-6766211a1/" target="_blank">
              <button type="button" class="btn btn-outline-info">Connect on LinkedIn</button>
            </a>
          </li>
      </ul>
    </nav>
    <div class="row section-article-top">
      <div class="col-sm-12 col-md-9 col-xl-8">
        <h2>Stylometry of Political Tweets</h2>
        <p>
          If you've been on Twitter a lot, you've probably seen American politics. A huge chunk of twitter 
          is composed of political tweets making them practically inseparable to the platform itself. 
          The two dominating parties, of course, are the Democratic party and the Republican party. 
          <br>
          Can we use stylometry to classify tweets between the two parties?
        </p>
        <br>
      </div>
    </div>
    <div class="section-article-body">
      <div class="row">
        <div class="col-sm-12 col-md-9 col-xl-8">
          <p style="text-align:left; color: gray; font-family:Open Sans, serif">
            Marcel Yuwono
            <span style="float:right;">
              13 July 2020
            </span>
          </p>
          <br>
          <h3>What's Stylometry?</h3>
          <p>
            Stylometry is the of analysing of literature and written language.
            It most commonly used to establish authorship of texts, among other applications. 
            Stylometry has existed in different forms even before computers. Today, stylometry is
            usually done by machine learning models. In industry, stylometric models are trained 
            to do things such as sentiment analysis, to allow companies to classify things such as 
            product reviews as "positive" or "negative."
          </p>
          <p>
            But not all stylometry is done by machine learning. More basic algorithms exist that can 
            tell us a lot about an authorship and their work. Let's take a look.
          </p>
          <br>
          <h3>Word Frequency Analysis</h3>
          <p>
            Word frequency analysis has existed way before computers. The premise is simple, to identify a
            text, we tabulate the number of times a unique word appears in the text. If we divide by the 
            number of words in the text, we get the proportion of times that word will appear in the text.
            By comparing the frequency distribution of different texts, we can make calculations on how closely
            they relate.
          </p>
          <p>
            However, visualizing the data isn't as easy as it seems. If we have 1000 unique words to calculate 
            the frequencies of, we need 1000 dimensions to visualize each point. Think of each text as a variable 
            that holds N attributes (each unique word) that need need to be plotted. If we only graph two unique 
            words, we can plot the x-value to be the relative frequency of the first word and the
            y-value as the relative frequency of the other word. With, three words, we just add another dimension. 
            But at 4 words, 5 words, 1000 words—well you see the problem.
          </p>  
          <br>
          <h3>Principal Component Analysis (the solution!)</h3>
          <p>
            The idea behind PCA is exactly the solution to our problem. With some linear algebra magic, we can 
            project n-dimensional points in space into smaller and smaller dimensions. It does this by calculating
            best fit lines and their orthogonal components which become the "principal components." Next, we make the 
            PC components as the axis of the new space, then project all the points in the space onto the PCs, thereby 
            transforming our points to a lower-dimension space.
          </p>
          <p>
            You can read more about PCA <a href="https://en.wikipedia.org/wiki/Principal_component_analysis" target="_blank">here.</a>
            All you really need to know is that we can use PCA to turn our 1000-components dataset into one with only 
            2 components, PC1 and PC2—so that we can plot the data in 2-dimensions. 
          </p>
          <br>
          <h3>The Federalist Papers</h3>
          <p>
            The Federalist Papers are often used to test out different stylometric models. The Federalist Papers is
            composed of 85 articles, and were written by Hamilton, Madison and John Jay.
            We know who wrote most of the articles, but the authorship of some are disputed. Hamilton, in his death claimed
            that 63 of the articles were his. But Madison later asserted that 12 of the papers Hamilton said he wrote were 
            in fact written by Madison himself.
          </p>
          <p>
            Let's apply our word frequency analysis and PCA to find some answers. Here's the dataset, courtesy
            of The Programming Historian:
            <a href="https://github.com/programminghistorian/ph-submissions/blob/gh-pages/assets/introduction-to-stylometry-with-python/stylometry-federalist.zip" target="_blank">link.</a>
            The Programming Historian is an incredible learning resource, check them out <a href="https://programminghistorian.org" target="_blank">here.</a>
          </p>
          <p>
            To process the data, we strip punctuations from each text. Then, we read the text files line by line and 
            start counting words. This allows us to create a frequency distribution of each chapter. Then we calculate 
            the frequency distribution (FD) for all the chapters, creating a combined FD, and grab the top 1000 most frequent
            words. Next we map the FDs of each chapter onto the combined FD. It's a little hard to explain, here's what it
            looks like:
          </p>
          <br>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">the</th>
                <th scope="col">of</th>
                <th scope="col">to</th>
                <th scope="col">...</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Ch. 1</th>
                <td>81.64</td>
                <td>65.07</td>
                <td>44.19</td>
                <td>...</td>
              </tr>
              <tr>
                <th scope="row">Ch. 2</th>
                <td>63.94</td>
                <td>49.14</td>
                <td>31.37</td>
                <td>...</td>
              </tr>
              <tr>
                <th scope="row">Ch. 3</th>
                <td>64.62</td>
                <td>42.17</td>
                <td>38.09</td>
                <td>...</td>
              </tr>
              <tr>
                <th scope="row">...</th>
                <td>...</td>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
            </tbody>
          </table>
          <br>
          <p>
            The values are exaggerated by a factor of 1000 for readability. The above table tells us that the frequency of
            the word "the" in chapter 1 is 81.64 per thousand words, and so on for the other values. Already, we can see that 
            the second and the third chapter seem closer to each other than they are to the first chapter. In fact, Alexander 
            Hamilton wrote the first chapter and John Jay wrote chapters two and three.
          </p>
          <p>
            Next, we interpret the above table as a matrix, then feed it to the PCA algorithm to bring down the number of components
            from 1000 to two. I'm using Python and the <a href="https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html" target="_blank">sklearn</a>
            library for PCA, and matplotlib to graph the results.
          </p>
          <p>
            Here's what the final visualization looks like:
          </p>
          <br>
          <div class="code-block-container">
            <div class="code-block">
              <br>
              <p>
                If the graph is difficult to see, click to open them in a new tab.
              </p>
              <br>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-12 graph-img-boarding">
              <a href="projects/stylometry/PCA_federalist.png" target="_blank">
                <img src="projects/stylometry/PCA_federalist.png"></img>
              </a>
            </div>
          </div>
          <br>
          <p>
            Let's remove shared articles and articles by John Jay to see the data clearer:
          </p>
          <br>
          <div class="row">
            <div class="col-12 graph-img-boarding">
              <a href="projects/stylometry/PCA_federalist_reduced.png" target="_blank">
                <img src="projects/stylometry/PCA_federalist_reduced.png"></img>
              </a>
            </div>
          </div>
          <br>
          <p>
            We see a very clear clustering between chapters of the same author, and the visualization
            suggests that most of the disputed papers are likely written by Madison instead of Hamilton.
            Historians and scientists using other stylometric methods almost unanimously agree to this same conclusion.
          </p>
          <br>
          <h3>Onto Twitter Politics</h3>
          <p>
            It took a while to get to the main idea, but here it is: can we see a similar correlation between 
            tweets by Democratic party members and tweets by Republican party members? Here, instead of plotting 
            individual chapters, we will plot whole twitter accounts, and see if twitter accounts with the same "author"
            (Democratic party vs Republican party) cluster in the visualization.
          </p>
          <p>
            To do this, I used <a href="https://github.com/taspinar/twitterscraper" target="_blank">twitterscraper</a>
            to scrape tweets from 20 Republican and 20 Democrat influencers. Most of the accounts are senators or 
            representatives but I included some political commentators. All tweets made by each account are then 
            merged into their own "chapter" which we use to perform the word frequency analysis.
          </p>
          <p>
            Here's what the data looks like:
          </p>
          <br>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">the</th>
                <th scope="col">to</th>
                <th scope="col">and</th>
                <th scope="col">...</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">(R) Ben Shapiro</th>
                <td>46.57</td>
                <td>24.80</td>
                <td>21.24</td>
                <td>...</td>
              </tr>
              <tr>
                <th scope="row">...</th>
                <td>... </td>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
              <tr>
                <th scope="row">(D) Bernie Sanders</th>
                <td>46.70</td>
                <td>35.50</td>
                <td>33.64</td>
                <td>...</td>
              </tr>
              <tr>
                <th scope="row">...</th>
                <td>...</td>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
            </tbody>
          </table>
          <br>
          <p>
            Again, we apply PCA then graph the visualization:
          </p>
          <br>
          <div class="row">
            <div class="col-12 graph-img-boarding">
              <a href="projects/stylometry/PCA_twitter_full.png" target="_blank">
                <img src="projects/stylometry/PCA_twitter_full.png"></img>
              </a>
            </div>
          </div>
          <br>
          <p>
            Some characters are skewing the graph very heavily. Here's the graph without Nancy Pelosi, Sarah Palin,
            Tucker Carlson, and Sean Hannity:
          </p>
          <br>
          <div class="row">
            <div class="col-12 graph-img-boarding">
              <a href="projects/stylometry/PCA_twitter_reduced.png" target="_blank">
                <img src="projects/stylometry/PCA_twitter_reduced.png"></img>
              </a>
            </div>
          </div>
          <br>
          <br>
          <h3>What Words Made the Difference?</h3>
          <p>
            Surprisingly, even though each point represents a different author, politicians in both parties
            cluster with each other quite heavily in the visualization.
          </p>
          <p>
            Democrat leaders tweeted the words "health" (by 6.67x) and "trump" (1.28x) more than Republican leaders.
            Republican leaders used "says" 3.29 times more than their Democratic counterparts.
          </p>
          <p>
            Surprisingly, Democrats and Republicans also differed significantly in the usage of very common words.
            Democrats were 1.35 times more likely to say "to" and over twice as likely to use "we."
            Republicans used "and" 1.17 times more than Democrats. Given the number of tweets queried, these differences
            are quite significant.
          </p>
          <br>
          <h3>Final Thoughts</h3>
          <p>
            When a multivariate data set is projected into smaller dimensions, some information will always be lost.
            In my Twitter analysis, PC1 and PC2 only accounted for ~40% of the total variance. Adding PC3 and graphing 
            the matrix in 3D will bring the accounted variance to around ~50%, which would increase the visualization's
            accuracy
          </p>
          <p>
            That begin said, I was suprised by how well the two parties clustered, given that all we did was basic word frequencies.
            With this data, we can easily determining if a set of tweets belong to a Republican or Democrat author.
          </p>
          <p>
            Unfortunately, word frequency analysis, although fast, is still too rudimentary. 
            If we want to draw more complex conclusions, we would have to more complex stylometric methods, most
            likely involving machine learning.
          </p>
          <br>
          <h3>Try it yourself</h3>
          <p>
            If you'd like to make your own visualizations, text files of the tweets and their word frequencies is 
            available here: <a href="https://github.com/mcay23/stylometryData" target="_blank">link.</a>
          </p>
          <br>
          <h3>References</h3>
          <p>
            <ol>
              <li><a href="https://en.wikipedia.org/wiki/Principal_component_analysis" target="_blank">Principal Component Analysis, Wikipedia EN</a></li>
              <li><a href="https://programminghistorian.org/en/lessons/introduction-to-stylometry-with-python" target="_blank">Introduction to Stylometry with Python, The Programming Historian</a></li>
              <li><a href="https://en.wikipedia.org/wiki/The_Federalist_Papers" target="_blank">The Federalist Papers, Wikipedia EN</a></li>
            </ol>
          </p>
        </div>
      </div>
      <br><br>
      <div class="row">
        <div class="col-sm-12">
          <div id="disqus_thread"></div>
          <script>
          var disqus_config = function () {
          this.page.url = 'https://marcelalanyuwono.com/stylometry.html'; 
          this.page.identifier = 'stylometry-comment';
          };
          (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://marcelalanyuwono-1.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
      </div>
    </div>
    <br><br>
    <footer class="footer">
      <div class="footer-container bg-dark">
        <div class="footer-group">
          <h1 class="footer-text">Let's Connect.</h1>
          <div class="icon-group">
            <a href="https://www.facebook.com/marcel.yuwono.90/" target="_blank"><i class="fa fa-facebook-square" id="fb-icon"></i></a>
            <a href="https://github.com/mcay23" target="_blank"><i class="fa fa-github-square" id="github-icon"></i></i></a>
            <a href="https://www.linkedin.com/in/marcel-alan-yuwono-6766211a1/" target="_blank"><i class="fa fa-linkedin-square" id="linkedin-icon""></i></i></a>        
          </div>
        </div>
      </div>
    </footer>
  </body>
  <!-- Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="js/main.js"></script>
</html>